<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Danceability Checker</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <div class="container">
    <h1>Danceability Checker</h1>

    <nav class="navbar-nav">
      <a href="/" class="nav-link {% if request.path == '/' %}active{% endif %}">ğŸ  Home</a>
      <a href="/recommend" class="nav-link {% if request.path == '/recommend' %}active{% endif %}">ğŸ§ Recommender</a>
      <a href="/top-tracks" class="nav-link {% if request.path == '/top-tracks' %}active{% endif %}">ğŸ”¥ Top Tracks</a>
      <a href="/visuals" class="nav-link {% if request.path == '/visuals' %}active{% endif %}">ğŸ“Š Visuals</a>
      <a href="/contact" class="nav-link {% if request.path == '/contact' %}active{% endif %}">ğŸ“¨ Contact</a>
    </nav>

    <form method="post" action="/check" class="mt-4">
      <div class="row justify-content-center">
        <div class="col-md-4">
          <select name="artists" id="artist-select" class="form-select mb-3" required>
            <option value="">Select Artist</option>
            {% for artist in artist_names %}
              <option value="{{ artist }}" {% if artist == artists %}selected{% endif %}>{{ artist }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-4">
          <select name="track_name" id="track-select" class="form-select mb-3" required>
            <option value="">Select Track</option>
            {% if artist_track_map.get(artists) %}
              {% for track in artist_track_map[artists] %}
                <option value="{{ track }}" {% if track == track_name %}selected{% endif %}>{{ track }}</option>
              {% endfor %}
            {% endif %}
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-outline-light">Check Danceability</button>
    </form>

    {% if error %}
      <p class="error-msg">{{ error }}</p>
    {% endif %}

    {% if danceability %}
      <div class="result-box {{ theme_class }}">
        Danceability: {{ danceability }}<br>
        Energy: {{ energy }}<br>
        Tempo: {{ tempo }}<br>
        Liveness: {{ liveness }}
      </div>
    {% endif %}

  </div>

  <script>
    const artistSelect = document.getElementById("artist-select");
    const trackSelect = document.getElementById("track-select");

    artistSelect.addEventListener("change", async () => {
      const selectedArtist = artistSelect.value;

      const response = await fetch("/get_tracks", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ artist: selectedArtist })
      });

      const data = await response.json();
      trackSelect.innerHTML = '<option value="">Select Track</option>';

      data.tracks.forEach(track => {
        const option = document.createElement("option");
        option.value = track;
        option.textContent = track;
        trackSelect.appendChild(option);
      });
    });
  </script>

</body>
</html>














